{"version":3,"file":"index.es.js","sources":["../src/schema.js","../src/from_markdown.js","../src/to_markdown.js"],"sourcesContent":["import {Schema} from \"prosemirror-model\"\n\n// ::Schema Document schema for the data model used by CommonMark.\nexport const schema = new Schema({\n  nodes: {\n    doc: {\n      content: \"block+\"\n    },\n\n    paragraph: {\n      content: \"inline*\",\n      group: \"block\",\n      parseDOM: [{tag: \"p\"}],\n      toDOM() { return [\"p\", 0] }\n    },\n\n    blockquote: {\n      content: \"block+\",\n      group: \"block\",\n      parseDOM: [{tag: \"blockquote\"}],\n      toDOM() { return [\"blockquote\", 0] }\n    },\n\n    horizontal_rule: {\n      group: \"block\",\n      parseDOM: [{tag: \"hr\"}],\n      toDOM() { return [\"div\", [\"hr\"]] }\n    },\n\n    heading: {\n      attrs: {level: {default: 1}},\n      content: \"(text | image)*\",\n      group: \"block\",\n      defining: true,\n      parseDOM: [{tag: \"h1\", attrs: {level: 1}},\n                 {tag: \"h2\", attrs: {level: 2}},\n                 {tag: \"h3\", attrs: {level: 3}},\n                 {tag: \"h4\", attrs: {level: 4}},\n                 {tag: \"h5\", attrs: {level: 5}},\n                 {tag: \"h6\", attrs: {level: 6}}],\n      toDOM(node) { return [\"h\" + node.attrs.level, 0] }\n    },\n\n    code_block: {\n      content: \"text*\",\n      group: \"block\",\n      code: true,\n      defining: true,\n      marks: \"\",\n      attrs: {params: {default: \"\"}},\n      parseDOM: [{tag: \"pre\", preserveWhitespace: \"full\", getAttrs: node => (\n        {params: node.getAttribute(\"data-params\") || \"\"}\n      )}],\n      toDOM(node) { return [\"pre\", node.attrs.params ? {\"data-params\": node.attrs.params} : {}, [\"code\", 0]] }\n    },\n\n    ordered_list: {\n      content: \"list_item+\",\n      group: \"block\",\n      attrs: {order: {default: 1}, tight: {default: false}},\n      parseDOM: [{tag: \"ol\", getAttrs(dom) {\n        return {order: dom.hasAttribute(\"start\") ? +dom.getAttribute(\"start\") : 1,\n                tight: dom.hasAttribute(\"data-tight\")}\n      }}],\n      toDOM(node) {\n        return [\"ol\", {start: node.attrs.order == 1 ? null : node.attrs.order,\n                       \"data-tight\": node.attrs.tight ? \"true\" : null}, 0]\n      }\n    },\n\n    bullet_list: {\n      content: \"list_item+\",\n      group: \"block\",\n      attrs: {tight: {default: false}},\n      parseDOM: [{tag: \"ul\", getAttrs: dom => ({tight: dom.hasAttribute(\"data-tight\")})}],\n      toDOM(node) { return [\"ul\", {\"data-tight\": node.attrs.tight ? \"true\" : null}, 0] }\n    },\n\n    list_item: {\n      content: \"paragraph block*\",\n      defining: true,\n      parseDOM: [{tag: \"li\"}],\n      toDOM() { return [\"li\", 0] }\n    },\n\n    text: {\n      group: \"inline\"\n    },\n\n    image: {\n      inline: true,\n      attrs: {\n        src: {},\n        alt: {default: null},\n        title: {default: null}\n      },\n      group: \"inline\",\n      draggable: true,\n      parseDOM: [{tag: \"img[src]\", getAttrs(dom) {\n        return {\n          src: dom.getAttribute(\"src\"),\n          title: dom.getAttribute(\"title\"),\n          alt: dom.getAttribute(\"alt\")\n        }\n      }}],\n      toDOM(node) { return [\"img\", node.attrs] }\n    },\n\n    hard_break: {\n      inline: true,\n      group: \"inline\",\n      selectable: false,\n      parseDOM: [{tag: \"br\"}],\n      toDOM() { return [\"br\"] }\n    }\n  },\n\n  marks: {\n    em: {\n      parseDOM: [{tag: \"i\"}, {tag: \"em\"},\n                 {style: \"font-style\", getAttrs: value => value == \"italic\" && null}],\n      toDOM() { return [\"em\"] }\n    },\n\n    strong: {\n      parseDOM: [{tag: \"b\"}, {tag: \"strong\"},\n                 {style: \"font-weight\", getAttrs: value => /^(bold(er)?|[5-9]\\d{2,})$/.test(value) && null}],\n      toDOM() { return [\"strong\"] }\n    },\n\n    link: {\n      attrs: {\n        href: {},\n        title: {default: null}\n      },\n      inclusive: false,\n      parseDOM: [{tag: \"a[href]\", getAttrs(dom) {\n        return {href: dom.getAttribute(\"href\"), title: dom.getAttribute(\"title\")}\n      }}],\n      toDOM(node) { return [\"a\", node.attrs] }\n    },\n\n    code: {\n      parseDOM: [{tag: \"code\"}],\n      toDOM() { return [\"code\"] }\n    }\n  }\n})\n","import markdownit from \"markdown-it\"\nimport {schema} from \"./schema\"\nimport {Mark} from \"prosemirror-model\"\n\nfunction maybeMerge(a, b) {\n  if (a.isText && b.isText && Mark.sameSet(a.marks, b.marks))\n    return a.withText(a.text + b.text)\n}\n\n// Object used to track the context of a running parse.\nclass MarkdownParseState {\n  constructor(schema, tokenHandlers) {\n    this.schema = schema\n    this.stack = [{type: schema.topNodeType, content: []}]\n    this.marks = Mark.none\n    this.tokenHandlers = tokenHandlers\n  }\n\n  top() {\n    return this.stack[this.stack.length - 1]\n  }\n\n  push(elt) {\n    if (this.stack.length) this.top().content.push(elt)\n  }\n\n  // : (string)\n  // Adds the given text to the current position in the document,\n  // using the current marks as styling.\n  addText(text) {\n    if (!text) return\n    let nodes = this.top().content, last = nodes[nodes.length - 1]\n    let node = this.schema.text(text, this.marks), merged\n    if (last && (merged = maybeMerge(last, node))) nodes[nodes.length - 1] = merged\n    else nodes.push(node)\n  }\n\n  // : (Mark)\n  // Adds the given mark to the set of active marks.\n  openMark(mark) {\n    this.marks = mark.addToSet(this.marks)\n  }\n\n  // : (Mark)\n  // Removes the given mark from the set of active marks.\n  closeMark(mark) {\n    this.marks = mark.removeFromSet(this.marks)\n  }\n\n  parseTokens(toks) {\n    for (let i = 0; i < toks.length; i++) {\n      let tok = toks[i]\n      let handler = this.tokenHandlers[tok.type]\n      if (!handler)\n        throw new Error(\"Token type `\" + tok.type + \"` not supported by Markdown parser\")\n      handler(this, tok)\n    }\n  }\n\n  // : (NodeType, ?Object, ?[Node]) → ?Node\n  // Add a node at the current position.\n  addNode(type, attrs, content) {\n    let node = type.createAndFill(attrs, content, this.marks)\n    if (!node) return null\n    this.push(node)\n    return node\n  }\n\n  // : (NodeType, ?Object)\n  // Wrap subsequent content in a node of the given type.\n  openNode(type, attrs) {\n    this.stack.push({type: type, attrs: attrs, content: []})\n  }\n\n  // : () → ?Node\n  // Close and return the node that is currently on top of the stack.\n  closeNode() {\n    if (this.marks.length) this.marks = Mark.none\n    let info = this.stack.pop()\n    return this.addNode(info.type, info.attrs, info.content)\n  }\n}\n\nfunction attrs(spec, token) {\n  if (spec.getAttrs) return spec.getAttrs(token)\n  // For backwards compatibility when `attrs` is a Function\n  else if (spec.attrs instanceof Function) return spec.attrs(token)\n  else return spec.attrs\n}\n\n// Code content is represented as a single token with a `content`\n// property in Markdown-it.\nfunction noOpenClose(type) {\n  return type == \"code_inline\" || type == \"code_block\" || type == \"fence\"\n}\n\nfunction withoutTrailingNewline(str) {\n  return str[str.length - 1] == \"\\n\" ? str.slice(0, str.length - 1) : str\n}\n\nfunction noOp() {}\n\nfunction tokenHandlers(schema, tokens) {\n  let handlers = Object.create(null)\n  for (let type in tokens) {\n    let spec = tokens[type]\n    if (spec.block) {\n      let nodeType = schema.nodeType(spec.block)\n      if (noOpenClose(type)) {\n        handlers[type] = (state, tok) => {\n          state.openNode(nodeType, attrs(spec, tok))\n          state.addText(withoutTrailingNewline(tok.content))\n          state.closeNode()\n        }\n      } else {\n        handlers[type + \"_open\"] = (state, tok) => state.openNode(nodeType, attrs(spec, tok))\n        handlers[type + \"_close\"] = state => state.closeNode()\n      }\n    } else if (spec.node) {\n      let nodeType = schema.nodeType(spec.node)\n      handlers[type] = (state, tok) => state.addNode(nodeType, attrs(spec, tok))\n    } else if (spec.mark) {\n      let markType = schema.marks[spec.mark]\n      if (noOpenClose(type)) {\n        handlers[type] = (state, tok) => {\n          state.openMark(markType.create(attrs(spec, tok)))\n          state.addText(withoutTrailingNewline(tok.content))\n          state.closeMark(markType)\n        }\n      } else {\n        handlers[type + \"_open\"] = (state, tok) => state.openMark(markType.create(attrs(spec, tok)))\n        handlers[type + \"_close\"] = state => state.closeMark(markType)\n      }\n    } else if (spec.ignore) {\n      if (noOpenClose(type)) {\n        handlers[type] = noOp\n      } else {\n        handlers[type + '_open'] = noOp\n        handlers[type + '_close'] = noOp\n      }\n    } else {\n      throw new RangeError(\"Unrecognized parsing spec \" + JSON.stringify(spec))\n    }\n  }\n\n  handlers.text = (state, tok) => state.addText(tok.content)\n  handlers.inline = (state, tok) => state.parseTokens(tok.children)\n  handlers.softbreak = handlers.softbreak || (state => state.addText(\"\\n\"))\n\n  return handlers\n}\n\n// ::- A configuration of a Markdown parser. Such a parser uses\n// [markdown-it](https://github.com/markdown-it/markdown-it) to\n// tokenize a file, and then runs the custom rules it is given over\n// the tokens to create a ProseMirror document tree.\nexport class MarkdownParser {\n  // :: (Schema, MarkdownIt, Object)\n  // Create a parser with the given configuration. You can configure\n  // the markdown-it parser to parse the dialect you want, and provide\n  // a description of the ProseMirror entities those tokens map to in\n  // the `tokens` object, which maps token names to descriptions of\n  // what to do with them. Such a description is an object, and may\n  // have the following properties:\n  //\n  // **`node`**`: ?string`\n  //   : This token maps to a single node, whose type can be looked up\n  //     in the schema under the given name. Exactly one of `node`,\n  //     `block`, or `mark` must be set.\n  //\n  // **`block`**`: ?string`\n  //   : This token comes in `_open` and `_close` variants (which are\n  //     appended to the base token name provides a the object\n  //     property), and wraps a block of content. The block should be\n  //     wrapped in a node of the type named to by the property's\n  //     value.\n  //\n  // **`mark`**`: ?string`\n  //   : This token also comes in `_open` and `_close` variants, but\n  //     should add a mark (named by the value) to its content, rather\n  //     than wrapping it in a node.\n  //\n  // **`attrs`**`: ?Object`\n  //   : Attributes for the node or mark. When `getAttrs` is provided,\n  //     it takes precedence.\n  //\n  // **`getAttrs`**`: ?(MarkdownToken) → Object`\n  //   : A function used to compute the attributes for the node or mark\n  //     that takes a [markdown-it\n  //     token](https://markdown-it.github.io/markdown-it/#Token) and\n  //     returns an attribute object.\n  //\n  // **`ignore`**`: ?bool`\n  //   : When true, ignore content for the matched token.\n  constructor(schema, tokenizer, tokens) {\n    // :: Object The value of the `tokens` object used to construct\n    // this parser. Can be useful to copy and modify to base other\n    // parsers on.\n    this.tokens = tokens\n    this.schema = schema\n    this.tokenizer = tokenizer\n    this.tokenHandlers = tokenHandlers(schema, tokens)\n  }\n\n  // :: (string) → Node\n  // Parse a string as [CommonMark](http://commonmark.org/) markup,\n  // and create a ProseMirror document as prescribed by this parser's\n  // rules.\n  parse(text) {\n    let state = new MarkdownParseState(this.schema, this.tokenHandlers), doc\n    state.parseTokens(this.tokenizer.parse(text, {}))\n    do { doc = state.closeNode() } while (state.stack.length)\n    return doc\n  }\n}\n\n// :: MarkdownParser\n// A parser parsing unextended [CommonMark](http://commonmark.org/),\n// without inline HTML, and producing a document in the basic schema.\nexport const defaultMarkdownParser = new MarkdownParser(schema, markdownit(\"commonmark\", {html: false}), {\n  blockquote: {block: \"blockquote\"},\n  paragraph: {block: \"paragraph\"},\n  list_item: {block: \"list_item\"},\n  bullet_list: {block: \"bullet_list\"},\n  ordered_list: {block: \"ordered_list\", getAttrs: tok => ({order: +tok.attrGet(\"start\") || 1})},\n  heading: {block: \"heading\", getAttrs: tok => ({level: +tok.tag.slice(1)})},\n  code_block: {block: \"code_block\"},\n  fence: {block: \"code_block\", getAttrs: tok => ({params: tok.info || \"\"})},\n  hr: {node: \"horizontal_rule\"},\n  image: {node: \"image\", getAttrs: tok => ({\n    src: tok.attrGet(\"src\"),\n    title: tok.attrGet(\"title\") || null,\n    alt: tok.children[0] && tok.children[0].content || null\n  })},\n  hardbreak: {node: \"hard_break\"},\n\n  em: {mark: \"em\"},\n  strong: {mark: \"strong\"},\n  link: {mark: \"link\", getAttrs: tok => ({\n    href: tok.attrGet(\"href\"),\n    title: tok.attrGet(\"title\") || null\n  })},\n  code_inline: {mark: \"code\"}\n})\n","// ::- A specification for serializing a ProseMirror document as\n// Markdown/CommonMark text.\nexport class MarkdownSerializer {\n  // :: (Object<(state: MarkdownSerializerState, node: Node, parent: Node, index: number)>, Object)\n  // Construct a serializer with the given configuration. The `nodes`\n  // object should map node names in a given schema to function that\n  // take a serializer state and such a node, and serialize the node.\n  //\n  // The `marks` object should hold objects with `open` and `close`\n  // properties, which hold the strings that should appear before and\n  // after a piece of text marked that way, either directly or as a\n  // function that takes a serializer state and a mark, and returns a\n  // string. `open` and `close` can also be functions, which will be\n  // called as\n  //\n  //     (state: MarkdownSerializerState, mark: Mark,\n  //      parent: Fragment, index: number) → string\n  //\n  // Where `parent` and `index` allow you to inspect the mark's\n  // context to see which nodes it applies to.\n  //\n  // Mark information objects can also have a `mixable` property\n  // which, when `true`, indicates that the order in which the mark's\n  // opening and closing syntax appears relative to other mixable\n  // marks can be varied. (For example, you can say `**a *b***` and\n  // `*a **b***`, but not `` `a *b*` ``.)\n  //\n  // To disable character escaping in a mark, you can give it an\n  // `escape` property of `false`. Such a mark has to have the highest\n  // precedence (must always be the innermost mark).\n  //\n  // The `expelEnclosingWhitespace` mark property causes the\n  // serializer to move enclosing whitespace from inside the marks to\n  // outside the marks. This is necessary for emphasis marks as\n  // CommonMark does not permit enclosing whitespace inside emphasis\n  // marks, see: http://spec.commonmark.org/0.26/#example-330\n  constructor(nodes, marks) {\n    // :: Object<(MarkdownSerializerState, Node)> The node serializer\n    // functions for this serializer.\n    this.nodes = nodes\n    // :: Object The mark serializer info.\n    this.marks = marks\n  }\n\n  // :: (Node, ?Object) → string\n  // Serialize the content of the given node to\n  // [CommonMark](http://commonmark.org/).\n  serialize(content, options) {\n    let state = new MarkdownSerializerState(this.nodes, this.marks, options)\n    state.renderContent(content)\n    return state.out\n  }\n}\n\n// :: MarkdownSerializer\n// A serializer for the [basic schema](#schema).\nexport const defaultMarkdownSerializer = new MarkdownSerializer({\n  blockquote(state, node) {\n    state.wrapBlock(\"> \", null, node, () => state.renderContent(node))\n  },\n  code_block(state, node) {\n    state.write(\"```\" + (node.attrs.params || \"\") + \"\\n\")\n    state.text(node.textContent, false)\n    state.ensureNewLine()\n    state.write(\"```\")\n    state.closeBlock(node)\n  },\n  heading(state, node) {\n    state.write(state.repeat(\"#\", node.attrs.level) + \" \")\n    state.renderInline(node)\n    state.closeBlock(node)\n  },\n  horizontal_rule(state, node) {\n    state.write(node.attrs.markup || \"---\")\n    state.closeBlock(node)\n  },\n  bullet_list(state, node) {\n    state.renderList(node, \"  \", () => (node.attrs.bullet || \"*\") + \" \")\n  },\n  ordered_list(state, node) {\n    let start = node.attrs.order || 1\n    let maxW = String(start + node.childCount - 1).length\n    let space = state.repeat(\" \", maxW + 2)\n    state.renderList(node, space, i => {\n      let nStr = String(start + i)\n      return state.repeat(\" \", maxW - nStr.length) + nStr + \". \"\n    })\n  },\n  list_item(state, node) {\n    state.renderContent(node)\n  },\n  paragraph(state, node) {\n    state.renderInline(node)\n    state.closeBlock(node)\n  },\n\n  image(state, node) {\n    state.write(\"![\" + state.esc(node.attrs.alt || \"\") + \"](\" + state.esc(node.attrs.src) +\n                (node.attrs.title ? \" \" + state.quote(node.attrs.title) : \"\") + \")\")\n  },\n  hard_break(state, node, parent, index) {\n    for (let i = index + 1; i < parent.childCount; i++)\n      if (parent.child(i).type != node.type) {\n        state.write(\"\\\\\\n\")\n        return\n      }\n  },\n  text(state, node) {\n    state.text(node.text)\n  }\n}, {\n  em: {open: \"*\", close: \"*\", mixable: true, expelEnclosingWhitespace: true},\n  strong: {open: \"**\", close: \"**\", mixable: true, expelEnclosingWhitespace: true},\n  link: {\n    open(_state, mark, parent, index) {\n      return isPlainURL(mark, parent, index, 1) ? \"<\" : \"[\"\n    },\n    close(state, mark, parent, index) {\n      return isPlainURL(mark, parent, index, -1) ? \">\"\n        : \"](\" + state.esc(mark.attrs.href) + (mark.attrs.title ? \" \" + state.quote(mark.attrs.title) : \"\") + \")\"\n    }\n  },\n  code: {open(_state, _mark, parent, index) { return backticksFor(parent.child(index), -1) },\n         close(_state, _mark, parent, index) { return backticksFor(parent.child(index - 1), 1) },\n         escape: false}\n})\n\nfunction backticksFor(node, side) {\n  let ticks = /`+/g, m, len = 0\n  if (node.isText) while (m = ticks.exec(node.text)) len = Math.max(len, m[0].length)\n  let result = len > 0 && side > 0 ? \" `\" : \"`\"\n  for (let i = 0; i < len; i++) result += \"`\"\n  if (len > 0 && side < 0) result += \" \"\n  return result\n}\n\nfunction isPlainURL(link, parent, index, side) {\n  if (link.attrs.title || !/^\\w+:/.test(link.attrs.href)) return false\n  let content = parent.child(index + (side < 0 ? -1 : 0))\n  if (!content.isText || content.text != link.attrs.href || content.marks[content.marks.length - 1] != link) return false\n  if (index == (side < 0 ? 1 : parent.childCount - 1)) return true\n  let next = parent.child(index + (side < 0 ? -2 : 1))\n  return !link.isInSet(next.marks)\n}\n\n// ::- This is an object used to track state and expose\n// methods related to markdown serialization. Instances are passed to\n// node and mark serialization methods (see `toMarkdown`).\nexport class MarkdownSerializerState {\n  constructor(nodes, marks, options) {\n    this.nodes = nodes\n    this.marks = marks\n    this.delim = this.out = \"\"\n    this.closed = false\n    this.inTightList = false\n    // :: Object\n    // The options passed to the serializer.\n    //   tightLists:: ?bool\n    //   Whether to render lists in a tight style. This can be overridden\n    //   on a node level by specifying a tight attribute on the node.\n    //   Defaults to false.\n    this.options = options || {}\n    if (typeof this.options.tightLists == \"undefined\")\n      this.options.tightLists = false\n  }\n\n  flushClose(size) {\n    if (this.closed) {\n      if (!this.atBlank()) this.out += \"\\n\"\n      if (size == null) size = 2\n      if (size > 1) {\n        let delimMin = this.delim\n        let trim = /\\s+$/.exec(delimMin)\n        if (trim) delimMin = delimMin.slice(0, delimMin.length - trim[0].length)\n        for (let i = 1; i < size; i++)\n          this.out += delimMin + \"\\n\"\n      }\n      this.closed = false\n    }\n  }\n\n  // :: (string, ?string, Node, ())\n  // Render a block, prefixing each line with `delim`, and the first\n  // line in `firstDelim`. `node` should be the node that is closed at\n  // the end of the block, and `f` is a function that renders the\n  // content of the block.\n  wrapBlock(delim, firstDelim, node, f) {\n    let old = this.delim\n    this.write(firstDelim || delim)\n    this.delim += delim\n    f()\n    this.delim = old\n    this.closeBlock(node)\n  }\n\n  atBlank() {\n    return /(^|\\n)$/.test(this.out)\n  }\n\n  // :: ()\n  // Ensure the current content ends with a newline.\n  ensureNewLine() {\n    if (!this.atBlank()) this.out += \"\\n\"\n  }\n\n  // :: (?string)\n  // Prepare the state for writing output (closing closed paragraphs,\n  // adding delimiters, and so on), and then optionally add content\n  // (unescaped) to the output.\n  write(content) {\n    this.flushClose()\n    if (this.delim && this.atBlank())\n      this.out += this.delim\n    if (content) this.out += content\n  }\n\n  // :: (Node)\n  // Close the block for the given node.\n  closeBlock(node) {\n    this.closed = node\n  }\n\n  // :: (string, ?bool)\n  // Add the given text to the document. When escape is not `false`,\n  // it will be escaped.\n  text(text, escape) {\n    let lines = text.split(\"\\n\")\n    for (let i = 0; i < lines.length; i++) {\n      var startOfLine = this.atBlank() || this.closed\n      this.write()\n      this.out += escape !== false ? this.esc(lines[i], startOfLine) : lines[i]\n      if (i != lines.length - 1) this.out += \"\\n\"\n    }\n  }\n\n  // :: (Node)\n  // Render the given node as a block.\n  render(node, parent, index) {\n    if (typeof parent == \"number\") throw new Error(\"!\")\n    this.nodes[node.type.name](this, node, parent, index)\n  }\n\n  // :: (Node)\n  // Render the contents of `parent` as block nodes.\n  renderContent(parent) {\n    parent.forEach((node, _, i) => this.render(node, parent, i))\n  }\n\n  // :: (Node)\n  // Render the contents of `parent` as inline content.\n  renderInline(parent) {\n    let active = [], trailing = \"\"\n    let progress = (node, _, index) => {\n      let marks = node ? node.marks : []\n\n      // Remove marks from `hard_break` that are the last node inside\n      // that mark to prevent parser edge cases with new lines just\n      // before closing marks.\n      // (FIXME it'd be nice if we had a schema-agnostic way to\n      // identify nodes that serialize as hard breaks)\n      if (node && node.type.name === \"hard_break\")\n        marks = marks.filter(m => {\n          if (index + 1 == parent.childCount) return false\n          let next = parent.child(index + 1)\n          return m.isInSet(next.marks) && (!next.isText || /\\S/.test(next.text))\n        })\n\n      let leading = trailing\n      trailing = \"\"\n      // If whitespace has to be expelled from the node, adjust\n      // leading and trailing accordingly.\n      if (node && node.isText && marks.some(mark => {\n        let info = this.marks[mark.type.name]\n        return info && info.expelEnclosingWhitespace\n      })) {\n        let [_, lead, inner, trail] = /^(\\s*)(.*?)(\\s*)$/m.exec(node.text)\n        leading += lead\n        trailing = trail\n        if (lead || trail) {\n          node = inner ? node.withText(inner) : null\n          if (!node) marks = active\n        }\n      }\n\n      let inner = marks.length && marks[marks.length - 1], noEsc = inner && this.marks[inner.type.name].escape === false\n      let len = marks.length - (noEsc ? 1 : 0)\n\n      // Try to reorder 'mixable' marks, such as em and strong, which\n      // in Markdown may be opened and closed in different order, so\n      // that order of the marks for the token matches the order in\n      // active.\n      outer: for (let i = 0; i < len; i++) {\n        let mark = marks[i]\n        if (!this.marks[mark.type.name].mixable) break\n        for (let j = 0; j < active.length; j++) {\n          let other = active[j]\n          if (!this.marks[other.type.name].mixable) break\n          if (mark.eq(other)) {\n            if (i > j)\n              marks = marks.slice(0, j).concat(mark).concat(marks.slice(j, i)).concat(marks.slice(i + 1, len))\n            else if (j > i)\n              marks = marks.slice(0, i).concat(marks.slice(i + 1, j)).concat(mark).concat(marks.slice(j, len))\n            continue outer\n          }\n        }\n      }\n\n      // Find the prefix of the mark set that didn't change\n      let keep = 0\n      while (keep < Math.min(active.length, len) && marks[keep].eq(active[keep])) ++keep\n\n      // Close the marks that need to be closed\n      while (keep < active.length)\n        this.text(this.markString(active.pop(), false, parent, index), false)\n\n      // Output any previously expelled trailing whitespace outside the marks\n      if (leading) this.text(leading)\n\n      // Open the marks that need to be opened\n      if (node) {\n        while (active.length < len) {\n          let add = marks[active.length]\n          active.push(add)\n          this.text(this.markString(add, true, parent, index), false)\n        }\n\n        // Render the node. Special case code marks, since their content\n        // may not be escaped.\n        if (noEsc && node.isText)\n          this.text(this.markString(inner, true, parent, index) + node.text +\n                    this.markString(inner, false, parent, index + 1), false)\n        else\n          this.render(node, parent, index)\n      }\n    }\n    parent.forEach(progress)\n    progress(null, null, parent.childCount)\n  }\n\n  // :: (Node, string, (number) → string)\n  // Render a node's content as a list. `delim` should be the extra\n  // indentation added to all lines except the first in an item,\n  // `firstDelim` is a function going from an item index to a\n  // delimiter for the first line of the item.\n  renderList(node, delim, firstDelim) {\n    if (this.closed && this.closed.type == node.type)\n      this.flushClose(3)\n    else if (this.inTightList)\n      this.flushClose(1)\n\n    let isTight = typeof node.attrs.tight != \"undefined\" ? node.attrs.tight : this.options.tightLists\n    let prevTight = this.inTightList\n    this.inTightList = isTight\n    node.forEach((child, _, i) => {\n      if (i && isTight) this.flushClose(1)\n      this.wrapBlock(delim, firstDelim(i), node, () => this.render(child, node, i))\n    })\n    this.inTightList = prevTight\n  }\n\n  // :: (string, ?bool) → string\n  // Escape the given string so that it can safely appear in Markdown\n  // content. If `startOfLine` is true, also escape characters that\n  // has special meaning only at the start of the line.\n  esc(str, startOfLine) {\n    str = str.replace(/[`*\\\\~\\[\\]]/g, \"\\\\$&\")\n    if (startOfLine) str = str.replace(/^[:#\\-*+]/, \"\\\\$&\").replace(/^(\\d+)\\./, \"$1\\\\.\")\n    return str\n  }\n\n  quote(str) {\n    var wrap = str.indexOf('\"') == -1 ? '\"\"' : str.indexOf(\"'\") == -1 ? \"''\" : \"()\"\n    return wrap[0] + str + wrap[1]\n  }\n\n  // :: (string, number) → string\n  // Repeat the given string `n` times.\n  repeat(str, n) {\n    let out = \"\"\n    for (let i = 0; i < n; i++) out += str\n    return out\n  }\n\n  // : (Mark, bool, string?) → string\n  // Get the markdown string for a given opening or closing mark.\n  markString(mark, open, parent, index) {\n    let info = this.marks[mark.type.name]\n    let value = open ? info.open : info.close\n    return typeof value == \"string\" ? value : value(this, mark, parent, index)\n  }\n\n  // :: (string) → { leading: ?string, trailing: ?string }\n  // Get leading and trailing whitespace from a string. Values of\n  // leading or trailing property of the return object will be undefined\n  // if there is no match.\n  getEnclosingWhitespace(text) {\n    return {\n      leading: (text.match(/^(\\s+)/) || [])[0],\n      trailing: (text.match(/(\\s+)$/) || [])[0]\n    }\n  }\n}\n"],"names":["let","nodeType","text","this","inner"],"mappings":"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"}