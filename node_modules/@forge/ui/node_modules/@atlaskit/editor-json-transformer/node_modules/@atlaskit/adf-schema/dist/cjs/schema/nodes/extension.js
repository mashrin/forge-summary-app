"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var extensions_1 = require("../../utils/extensions");
var createExtensionNodeSpec = function (allowLocalId) {
    if (allowLocalId === void 0) { allowLocalId = false; }
    var nodeSpec = {
        inline: false,
        group: 'block',
        atom: true,
        selectable: true,
        attrs: {
            extensionType: { default: '' },
            extensionKey: { default: '' },
            parameters: { default: null },
            text: { default: null },
            layout: { default: 'default' },
        },
        parseDOM: [
            {
                tag: '[data-node-type="extension"]',
                getAttrs: function (domNode) {
                    return extensions_1.getExtensionAttrs(domNode, allowLocalId);
                },
            },
        ],
        toDOM: function (node) {
            var attrs = {
                'data-node-type': 'extension',
                'data-extension-type': node.attrs.extensionType,
                'data-extension-key': node.attrs.extensionKey,
                'data-text': node.attrs.text,
                'data-parameters': JSON.stringify(node.attrs.parameters),
                'data-layout': node.attrs.layout,
            };
            return ['div', attrs];
        },
    };
    if (allowLocalId && nodeSpec.attrs) {
        nodeSpec.attrs.localId = { default: '' };
    }
    return nodeSpec;
};
exports.extension = createExtensionNodeSpec();
exports.extensionWithLocalId = createExtensionNodeSpec(true);
//# sourceMappingURL=extension.js.map