import { uuid } from '../../utils/uuid';
import { getExtensionAttrs } from '../../utils/extensions';
var createInlineExtensionNodeSpec = function (allowLocalId) {
    if (allowLocalId === void 0) { allowLocalId = false; }
    var nodeSpec = {
        inline: true,
        group: 'inline',
        selectable: true,
        attrs: {
            extensionType: { default: '' },
            extensionKey: { default: '' },
            parameters: { default: null },
            text: { default: null },
        },
        parseDOM: [
            {
                tag: 'span[data-extension-type]',
                getAttrs: function (domNode) {
                    return getExtensionAttrs(domNode, allowLocalId, true);
                },
            },
        ],
        toDOM: function (node) {
            var attrs = {
                'data-extension-type': node.attrs.extensionType,
                'data-extension-key': node.attrs.extensionKey,
                'data-text': node.attrs.text,
                'data-parameters': JSON.stringify(node.attrs.parameters),
                contenteditable: 'false',
            };
            return ['span', attrs];
        },
    };
    if (allowLocalId && nodeSpec.attrs) {
        nodeSpec.attrs.localId = { default: uuid.generate() };
    }
    return nodeSpec;
};
export var inlineExtension = createInlineExtensionNodeSpec();
export var inlineExtensionWithLocalId = createInlineExtensionNodeSpec(true);
//# sourceMappingURL=inline-extension.js.map