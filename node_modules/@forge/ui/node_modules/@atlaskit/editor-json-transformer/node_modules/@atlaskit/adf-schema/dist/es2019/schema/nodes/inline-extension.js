import { uuid } from '../../utils/uuid';
import { getExtensionAttrs } from '../../utils/extensions';
const createInlineExtensionNodeSpec = (allowLocalId = false) => {
    const nodeSpec = {
        inline: true,
        group: 'inline',
        selectable: true,
        attrs: {
            extensionType: { default: '' },
            extensionKey: { default: '' },
            parameters: { default: null },
            text: { default: null },
        },
        parseDOM: [
            {
                tag: 'span[data-extension-type]',
                getAttrs: domNode => getExtensionAttrs(domNode, allowLocalId, true),
            },
        ],
        toDOM(node) {
            const attrs = {
                'data-extension-type': node.attrs.extensionType,
                'data-extension-key': node.attrs.extensionKey,
                'data-text': node.attrs.text,
                'data-parameters': JSON.stringify(node.attrs.parameters),
                contenteditable: 'false',
            };
            return ['span', attrs];
        },
    };
    if (allowLocalId && nodeSpec.attrs) {
        nodeSpec.attrs.localId = { default: uuid.generate() };
    }
    return nodeSpec;
};
export const inlineExtension = createInlineExtensionNodeSpec();
export const inlineExtensionWithLocalId = createInlineExtensionNodeSpec(true);
//# sourceMappingURL=inline-extension.js.map